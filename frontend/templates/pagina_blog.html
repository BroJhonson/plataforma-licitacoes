{% extends "base.html" %}
{% set body_class = 'page-blog' %} 

{% block title %}{{ page_title }} - RADAR PNCP{% endblock %}

{% block content %}
<div class="container py-4">
    <div class="row justify-content-center">
        <div class="col-md-10 col-lg-8"> 
            <header class="mb-5 text-center">
                <h1 class="display-5 fw-bold">{{ page_title }}</h1>
                <p class="lead text-muted">Artigos, notícias e dicas sobre o universo das licitações públicas.</p>
            </header>

            {% if posts %}
                {% for post in posts %}
                <!-- DEBUG SLUG: {{ post.slug }} -->
                <article class="blog-post-summary mb-5 pb-3 border-bottom position-relative">
                    {% if post.imagem_destaque %}
                        <a href="{{ url_for('pagina_post_blog', post_slug=post.slug) }}">
                            <img src="{{ url_for('static', filename='images/' + post.imagem_destaque) }}" alt="{{ post.titulo }}" class="img-fluid rounded mb-3" style="max-height: 200px; width: 100%; object-fit: cover;">
                        </a>
                    {% endif %}
                    <h2 class="h3 blog-post-title mb-1">
                        <a href="{{ url_for('pagina_post_blog', post_slug=post.slug) }}" class="text-decoration-none link-dark stretched-link">{{ post.titulo }}</a>
                    </h2>
                    <p class="blog-post-meta text-muted mb-2">
                        <small><i class="bi bi-calendar3"></i> Publicado em: {{ post.data }}</small>
                    </p>
                    <p class="card-text">{{ post.resumo }}</p>
                    {# O stretched-link no título já torna o card clicável, mas podemos manter um botão se preferir #}
                    {# <a href="{{ url_for('pagina_post_blog', post_slug=post.slug) }}" class="btn btn-sm btn-outline-primary">Leia mais <i class="bi bi-arrow-right-short"></i></a> #}
                </article>
                {% endfor %}
            {% else %}
                <div class="alert alert-info text-center" role="alert">
                    Nenhum post encontrado no momento. Volte em breve!
                </div>
            {% endif %}

            <!-- (Opcional) Paginação para o blog aqui se houver muitos posts -->
            {# 
            <nav aria-label="Navegação do Blog">
                <ul class="pagination justify-content-center">
                    <li class="page-item disabled"><a class="page-link" href="#">Anterior</a></li>
                    <li class="page-item active"><a class="page-link" href="#">1</a></li>
                    <li class="page-item"><a class="page-link" href="#">2</a></li>
                    <li class="page-item"><a class="page-link" href="#">Próxima</a></li>
                </ul>
            </nav>
            #}
        </div>
    </div>
</div>
{% endblock %}